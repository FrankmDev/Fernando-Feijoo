---
import { Image } from "astro:assets";
import theFall from "@assets/heroSlider/TheFall.avif";
import robots from "@assets/heroSlider/robots.avif";
import theWar from "@assets/heroSlider/theWar.avif";
import slide3 from "@assets/heroSlider/3.avif";
import theFuture from "@assets/heroSlider/TheFuture.avif";
import slide2 from "@assets/heroSlider/2.avif";

interface Slide {
  id: number;
  src: ImageMetadata;
  alt: string;
  title?: string;
  isBW?: boolean;
}

const slides: Slide[] = [
  {
    id: 1,
    src: theFall,
    alt: "The Fall artwork by Fernando Feijoo",
    title: "The Fall",
    isBW: true,
  },
  {
    id: 2,
    src: robots,
    alt: "Robots artwork by Fernando Feijoo",
    title: "Robots",
    isBW: false,
  },
  {
    id: 3,
    src: theWar,
    alt: "The War artwork by Fernando Feijoo",
    title: "The War",
    isBW: true,
  },
  {
    id: 4,
    src: slide3,
    alt: "Artwork 3 by Fernando Feijoo",
    title: "Artwork 3",
    isBW: false,
  },
  {
    id: 5,
    src: theFuture,
    alt: "The Future artwork by Fernando Feijoo",
    title: "The Future",
    isBW: false,
  },
  {
    id: 6,
    src: slide2,
    alt: "Artwork 2 by Fernando Feijoo",
    title: "Artwork 2",
    isBW: false,
  },
];
---

<div
  class="hero-slider"
  role="region"
  aria-roledescription="carousel"
  aria-label="Featured artworks"
  data-hero-slider
>
  <!-- Film Grain Overlay -->
  <div class="grain-overlay" aria-hidden="true"></div>

  <!-- Vignette Effect -->
  <div class="vignette-overlay" aria-hidden="true"></div>

  <!-- Slides -->
  <div class="slides-container">
    {
      slides.map((slide, index) => (
        <div
          class={`slide ${index === 0 ? "active" : ""}`}
          role="group"
          aria-roledescription="slide"
          aria-label={`${index + 1} of ${slides.length}: ${slide.title || slide.alt}`}
          aria-hidden={index !== 0}
          data-slide-index={index}
        >
          <div class="slide-image-wrapper">
            <div class="slide-image-inner" data-parallax>
              <Image
                src={slide.src}
                alt={slide.alt}
                class={`slide-image ${slide.isBW ? 'bw-image' : ''}`}
                loading={index === 0 ? "eager" : "lazy"}
                fetchpriority={index === 0 ? "high" : "auto"}
                decoding="async"
                draggable="false"
                width={1920}
                height={1080}
              />
            </div>
          </div>

          <!-- Slide Content -->
          <div class="slide-content">
            <div class="slide-content-inner">
              <h2 class="slide-title-main" data-hero-title>
                <span class="title-wrapper">{slide.title}</span>
              </h2>
            </div>
          </div>
        </div>
      ))
    }
  </div>

  <!-- Navigation Arrows -->
  <button class="nav-arrow nav-prev" aria-label="Previous slide" data-hero-prev>
    <span class="arrow-circle">
      <span class="arrow-bg"></span>
      <span class="arrow-glow"></span>
      <span class="arrow-content">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
    </span>
    <span class="arrow-label">Prev</span>
  </button>

  <button class="nav-arrow nav-next" aria-label="Next slide" data-hero-next>
    <span class="arrow-circle">
      <span class="arrow-bg"></span>
      <span class="arrow-glow"></span>
      <span class="arrow-content">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
    </span>
    <span class="arrow-label">Next</span>
  </button>

  <!-- Progress Ring + Autoplay Toggle -->
  <div class="progress-container">
    <svg class="progress-ring" viewBox="0 0 48 48" aria-hidden="true">
      <circle class="progress-ring-track" cx="24" cy="24" r="22" fill="none"/>
      <circle class="progress-ring-fill" cx="24" cy="24" r="22" fill="none" data-hero-progress-ring/>
    </svg>
    <button class="autoplay-toggle" aria-label="Pause slideshow" data-hero-autoplay>
      <span class="toggle-bg"></span>
      <span class="toggle-icon pause-icon">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor">
          <rect x="6" y="4" width="4" height="16" rx="1"/>
          <rect x="14" y="4" width="4" height="16" rx="1"/>
        </svg>
      </span>
      <span class="toggle-icon play-icon">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7z"/>
        </svg>
      </span>
    </button>
  </div>

  <!-- Bottom Controls -->
  <div class="controls">
    <!-- Editorial Counter -->
    <div class="counter" aria-live="polite" aria-atomic="true">
      <span class="counter-current" data-hero-current>
        <span class="counter-digit" data-digit="0">0</span>
        <span class="counter-digit" data-digit="1">1</span>
      </span>
      <span class="counter-line">
        <span class="line-track"></span>
        <span class="line-fill"></span>
      </span>
      <span class="counter-total">{String(slides.length).padStart(2, "0")}</span>
    </div>

    <!-- Simple Indicators -->
    <div class="indicators" role="tablist" aria-label="Slide navigation">
      {
        slides.map((slide, index) => (
          <button
            class={`indicator ${index === 0 ? "active" : ""}`}
            role="tab"
            aria-label={`Go to slide ${index + 1}: ${slide.title}`}
            aria-selected={index === 0}
            aria-controls={`slide-${index}`}
            data-hero-indicator={index}
          >
            <span class="indicator-bar">
              <span class="indicator-progress" data-hero-progress={index}></span>
            </span>
          </button>
        ))
      }
    </div>


  </div>
</div>

<script is:inline>
  (function () {
    function initHeroSlider() {
      const slider = document.querySelector("[data-hero-slider]");
      if (!slider || slider.dataset.initialized) return;

      slider.dataset.initialized = "true";

      const slides = slider.querySelectorAll("[data-slide-index]");
      const indicators = slider.querySelectorAll("[data-hero-indicator]");
      const progressBars = slider.querySelectorAll("[data-hero-progress]");
      const progressRing = slider.querySelector("[data-hero-progress-ring]");
      const currentIndexEl = slider.querySelector("[data-hero-current]");
      const prevBtn = slider.querySelector("[data-hero-prev]");
      const nextBtn = slider.querySelector("[data-hero-next]");
      const autoplayBtn = slider.querySelector("[data-hero-autoplay]");
      const parallaxElements = slider.querySelectorAll("[data-parallax]");

      let currentIndex = 0;
      let isTransitioning = false;
      let autoplayInterval = null;
      let progressStart = 0;
      let isPaused = false;
      let ringCircumference = 2 * Math.PI * 22;
      let mouseX = 0, mouseY = 0;
      let rafId = null;

      const AUTOPLAY_DELAY = 6000;
      const TRANSITION_DURATION = 1200;
      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      // Initialize progress ring
      if (progressRing) {
        progressRing.style.strokeDasharray = ringCircumference;
        progressRing.style.strokeDashoffset = ringCircumference;
      }

      // Parallax effect
      function updateParallax() {
        if (prefersReducedMotion) return;

        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;

        const moveX = (mouseX - centerX) / centerX * -15;
        const moveY = (mouseY - centerY) / centerY * -10;

        parallaxElements.forEach(el => {
          el.style.transform = `translate(${moveX}px, ${moveY}px) scale(1.1)`;
        });

        rafId = requestAnimationFrame(updateParallax);
      }

      document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      }, { passive: true });

      if (!prefersReducedMotion) {
        updateParallax();
      }

      function updateCounter(index) {
        if (!currentIndexEl) return;
        const digits = currentIndexEl.querySelectorAll('.counter-digit');
        const newValue = String(index + 1).padStart(2, "0");

        digits.forEach((digit, i) => {
          const oldDigit = digit.textContent;
          const newDigit = newValue[i];

          if (oldDigit !== newDigit) {
            digit.style.transform = 'translateY(-100%)';
            digit.style.opacity = '0';

            setTimeout(() => {
              digit.textContent = newDigit;
              digit.style.transform = 'translateY(0)';
              digit.style.opacity = '1';
            }, 200);
          }
        });
      }

      function goToSlide(index) {
        if (isTransitioning || index === currentIndex) return;

        isTransitioning = true;

        const currentSlide = slides[currentIndex];
        const nextSlide = slides[index];

        // Update slides
        currentSlide.classList.remove("active");
        currentSlide.setAttribute("aria-hidden", "true");

        nextSlide.classList.add("active");
        nextSlide.setAttribute("aria-hidden", "false");

        // Update indicators
        indicators[currentIndex].classList.remove("active");
        indicators[currentIndex].setAttribute("aria-selected", "false");
        indicators[index].classList.add("active");
        indicators[index].setAttribute("aria-selected", "true");

        // Update counter
        updateCounter(index);

        currentIndex = index;
        progressStart = Date.now();

        // Reset progress
        progressBars.forEach(bar => {
          bar.style.width = "0%";
          bar.style.transition = 'none';
        });

        if (progressRing) {
          progressRing.style.transition = 'none';
          progressRing.style.strokeDashoffset = ringCircumference;
        }

        setTimeout(() => {
          isTransitioning = false;
        }, TRANSITION_DURATION);
      }

      function nextSlide() {
        if (isTransitioning) return;
        goToSlide((currentIndex + 1) % slides.length);
      }

      function prevSlide() {
        if (isTransitioning) return;
        goToSlide((currentIndex - 1 + slides.length) % slides.length);
      }

      function toggleAutoplay() {
        isPaused = !isPaused;
        if (autoplayBtn) {
          autoplayBtn.classList.toggle('paused', isPaused);
          autoplayBtn.setAttribute('aria-label', isPaused ? 'Play slideshow' : 'Pause slideshow');
        }
        if (isPaused) {
          clearInterval(autoplayInterval);
          autoplayInterval = null;
          progressBars.forEach(bar => bar.style.transition = 'none');
          if (progressRing) progressRing.style.transition = 'none';
        } else {
          startAutoplay();
        }
      }

      function startAutoplay() {
        if (autoplayInterval || prefersReducedMotion || isPaused) return;

        progressStart = Date.now();

        // Animate progress bar
        const currentBar = progressBars[currentIndex];
        if (currentBar) {
          currentBar.style.transition = `width ${AUTOPLAY_DELAY}ms linear`;
          currentBar.style.width = '100%';
        }

        // Animate ring
        if (progressRing) {
          progressRing.style.transition = `stroke-dashoffset ${AUTOPLAY_DELAY}ms linear`;
          progressRing.style.strokeDashoffset = '0';
        }

        autoplayInterval = setInterval(() => {
          if (Date.now() - progressStart >= AUTOPLAY_DELAY) {
            nextSlide();
            setTimeout(() => {
              progressBars.forEach(bar => {
                bar.style.transition = 'none';
                bar.style.width = '0%';
              });
              if (progressRing) {
                progressRing.style.transition = 'none';
                progressRing.style.strokeDashoffset = ringCircumference;
              }
              if (!isPaused) {
                setTimeout(() => {
                  const nextBar = progressBars[currentIndex];
                  if (nextBar) {
                    nextBar.style.transition = `width ${AUTOPLAY_DELAY}ms linear`;
                    nextBar.style.width = '100%';
                  }
                  if (progressRing) {
                    progressRing.style.transition = `stroke-dashoffset ${AUTOPLAY_DELAY}ms linear`;
                    progressRing.style.strokeDashoffset = '0';
                  }
                }, 50);
              }
            }, 50);
          }
        }, 50);
      }

      // Event listeners
      if (prevBtn) prevBtn.addEventListener("click", prevSlide);
      if (nextBtn) nextBtn.addEventListener("click", nextSlide);
      if (autoplayBtn) autoplayBtn.addEventListener("click", toggleAutoplay);

      indicators.forEach((indicator, index) => {
        indicator.addEventListener("click", () => {
          goToSlide(index);
          if (!isPaused) {
            progressStart = Date.now();
            progressBars.forEach(bar => {
              bar.style.transition = 'none';
              bar.style.width = '0%';
            });
            if (progressRing) {
              progressRing.style.transition = 'none';
              progressRing.style.strokeDashoffset = ringCircumference;
            }
            setTimeout(() => {
              const currentBar = progressBars[index];
              if (currentBar) {
                currentBar.style.transition = `width ${AUTOPLAY_DELAY}ms linear`;
                currentBar.style.width = '100%';
              }
              if (progressRing) {
                progressRing.style.transition = `stroke-dashoffset ${AUTOPLAY_DELAY}ms linear`;
                progressRing.style.strokeDashoffset = '0';
              }
            }, 50);
          }
        });
      });

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft") prevSlide();
        if (e.key === "ArrowRight") nextSlide();
        if (e.key === " ") {
          e.preventDefault();
          toggleAutoplay();
        }
      });

      // Touch/swipe support
      let touchStartX = 0;
      let touchStartY = 0;

      slider.addEventListener("touchstart", (e) => {
        touchStartX = e.changedTouches[0].screenX;
        touchStartY = e.changedTouches[0].screenY;
      }, { passive: true });

      slider.addEventListener("touchend", (e) => {
        const diffX = touchStartX - e.changedTouches[0].screenX;
        const diffY = touchStartY - e.changedTouches[0].screenY;
        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
          diffX > 0 ? nextSlide() : prevSlide();
        }
      }, { passive: true });

      // Pause on hover
      slider.addEventListener("mouseenter", () => {
        if (!isPaused && autoplayInterval) {
          clearInterval(autoplayInterval);
          autoplayInterval = null;
          progressBars.forEach(bar => {
            bar.style.transition = 'none';
            bar.style.width = getComputedStyle(bar).width;
          });
          if (progressRing) {
            progressRing.style.transition = 'none';
          }
        }
      });

      slider.addEventListener("mouseleave", () => {
        if (!isPaused && !prefersReducedMotion) {
          const remainingTime = AUTOPLAY_DELAY - (Date.now() - progressStart);
          const currentBar = progressBars[currentIndex];
          if (currentBar) {
            currentBar.style.transition = `width ${remainingTime}ms linear`;
            currentBar.style.width = '100%';
          }
          if (progressRing) {
            progressRing.style.transition = `stroke-dashoffset ${remainingTime}ms linear`;
            progressRing.style.strokeDashoffset = '0';
          }
          startAutoplay();
        }
      });

      // Cleanup on page unload
      window.addEventListener('beforeunload', () => {
        if (rafId) cancelAnimationFrame(rafId);
      });

      // Initialize
      updateCounter(0);
      startAutoplay();
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initHeroSlider);
    } else {
      initHeroSlider();
    }

    document.addEventListener("astro:page-load", initHeroSlider);
  })();
</script>

<style>
  /* ============================================
     BASE & OVERLAYS
     ============================================ */
  .hero-slider {
    position: relative;
    width: 100%;
    height: clamp(50vh, 72vh, 85vh);
    min-height: clamp(400px, 60vh, 600px);
    max-height: clamp(600px, 85vh, 100vh);
    overflow: hidden;
    background: #050505;
    border-radius: 3px;
  }

  /* Film Grain */
  .grain-overlay {
    position: absolute;
    inset: 0;
    z-index: 100;
    pointer-events: none;
    opacity: 0.035;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    animation: grain 0.5s steps(10) infinite;
  }

  @keyframes grain {
    0%, 100% { transform: translate(0, 0); }
    10% { transform: translate(-2%, -2%); }
    20% { transform: translate(2%, 2%); }
    30% { transform: translate(-1%, 1%); }
    40% { transform: translate(1%, -1%); }
    50% { transform: translate(-2%, 2%); }
    60% { transform: translate(2%, -2%); }
    70% { transform: translate(-1%, -1%); }
    80% { transform: translate(1%, 1%); }
    90% { transform: translate(-2%, -1%); }
  }

  /* Vignette */
  .vignette-overlay {
    position: absolute;
    inset: 0;
    z-index: 5;
    pointer-events: none;
    background: radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,0.5) 100%);
  }

  /* ============================================
     SLIDES
     ============================================ */
  .slides-container {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .slide {
    position: absolute;
    inset: 0;
    opacity: 0;
    visibility: hidden;
    transition: opacity 1.4s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 1.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .slide.active {
    opacity: 1;
    visibility: visible;
    z-index: 1;
  }

  .slide-image-wrapper {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }

  .slide-image-inner {
    position: absolute;
    inset: -8%;
    width: 116%;
    height: 116%;
    will-change: transform;
  }

  .slide-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    user-select: none;
    filter: brightness(0.95) contrast(1) saturate(1);
    transform: scale(1.12);
    transition: filter 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .slide-image.bw-image {
    filter: brightness(0.95) contrast(1.05) saturate(0) grayscale(100%);
  }

  .slide.active .slide-image.bw-image {
    filter: brightness(1) contrast(1.1) saturate(0) grayscale(100%);
  }

  .slide.active .slide-image {
    filter: brightness(1) contrast(1) saturate(1);
    animation: cinematic-move 10s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Darken image on hover for better text readability */
  .hero-slider:hover .slide.active .slide-image {
    filter: brightness(0.65) contrast(1.05) saturate(0.95);
  }

  /* Additional dark overlay on hover */
  .slide-image-wrapper::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0);
    transition: background 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    pointer-events: none;
    z-index: 2;
  }

  .hero-slider:hover .slide.active .slide-image-wrapper::after {
    background: rgba(0, 0, 0, 0.35);
  }

  @keyframes cinematic-move {
    0% { transform: scale(1.12) translate(0, 0); }
    100% { transform: scale(1) translate(-2%, -1%); }
  }

  /* ============================================
     SLIDE CONTENT - EDITORIAL
     ============================================ */
  .slide-content {
    position: absolute;
    inset: 0;
    z-index: 10;
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;
    padding: clamp(1.5rem, 4vw, 2.5rem) clamp(1rem, 3vw, 2rem) clamp(3rem, 8vw, 6.5rem);
    pointer-events: none;
    background: linear-gradient(
      to top,
      rgba(0, 0, 0, 0.5) 0%,
      rgba(0, 0, 0, 0.2) 30%,
      transparent 60%
    );
    transition: background 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Darken content area on hover */
  .hero-slider:hover .slide-content {
    background: linear-gradient(
      to top,
      rgba(0, 0, 0, 0.85) 0%,
      rgba(0, 0, 0, 0.5) 35%,
      rgba(0, 0, 0, 0.2) 60%,
      transparent 85%
    );
  }

  .slide-content-inner {
    display: flex;
    flex-direction: column;
    gap: 0;
    max-width: 550px;
  }

  .slide-title-main {
    font-family: "Exo", system-ui, sans-serif;
    font-size: clamp(2.25rem, 6vw, 4rem);
    font-weight: 300;
    letter-spacing: -0.02em;
    color: #fff;
    margin: 0;
    line-height: 1.05;
    overflow: hidden;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    transition: text-shadow 0.6s ease;
  }

  .hero-slider:hover .slide-title-main {
    text-shadow: 0 2px 25px rgba(0, 0, 0, 0.6);
  }

  .title-wrapper {
    display: block;
    opacity: 0;
    transform: translateY(100%);
    transition: all 1s cubic-bezier(0.16, 1, 0.3, 1) 0.5s;
  }

  .slide.active .title-wrapper {
    opacity: 1;
    transform: translateY(0);
  }

  /* ============================================
     NAVIGATION ARROWS - CINEMATIC
     ============================================ */
  .nav-arrow {
    position: absolute;
    top: 50%;
    z-index: 20;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    -webkit-tap-highlight-color: transparent;
    outline: none;
    transform: translateY(-50%);
  }

  .hero-slider:hover .nav-arrow {
    opacity: 1;
  }

  .arrow-circle {
    position: relative;
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .arrow-bg {
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 50%;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .arrow-glow {
    position: absolute;
    inset: -4px;
    background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
    border-radius: 50%;
    opacity: 0;
    filter: blur(8px);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .arrow-content {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.4s ease;
  }

  .arrow-content svg {
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .arrow-label {
    font-family: "Exo", system-ui, sans-serif;
    font-size: 0.5625rem;
    font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.4);
    opacity: 0;
    transform: translateY(5px);
    transition: all 0.4s ease 0.1s;
  }

  /* Hover States */
  .nav-arrow:hover .arrow-circle {
    transform: scale(1.05);
  }

  .nav-arrow:hover .arrow-bg {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.25);
  }

  .nav-arrow:hover .arrow-glow {
    opacity: 1;
  }

  .nav-arrow:hover .arrow-content svg {
    transform: scale(0.95);
  }

  .nav-arrow:hover .arrow-label {
    opacity: 1;
    transform: translateY(0);
  }

  /* Icon Movement */
  .nav-prev:hover .arrow-content svg {
    transform: translateX(-2px);
  }

  .nav-next:hover .arrow-content svg {
    transform: translateX(2px);
  }

  /* Positioning */
  .nav-prev {
    left: 1.5rem;
  }

  .nav-next {
    right: 1.5rem;
  }

  /* Focus - Completely remove default browser outline */
  .nav-arrow:focus,
  .nav-arrow:focus-visible {
    outline: none !important;
    box-shadow: none !important;
    -webkit-appearance: none;
  }

  /* Webkit-specific focus removal */
  .nav-arrow::-moz-focus-inner {
    border: 0;
  }

  /* ============================================
     PROGRESS RING
     ============================================ */
  .progress-container {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    z-index: 20;
    width: 48px;
    height: 48px;
  }

  .progress-ring {
    position: absolute;
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
  }

  .progress-ring-track {
    stroke: rgba(255, 255, 255, 0.1);
    stroke-width: 1;
  }

  .progress-ring-fill {
    stroke: rgba(255, 255, 255, 0.7);
    stroke-width: 1.5;
    stroke-linecap: round;
    transition: stroke-dashoffset 0.1s linear;
  }

  /* Autoplay Toggle */
  .autoplay-toggle {
    position: absolute;
    inset: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: 50%;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    transition: all 0.3s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
  }

  .autoplay-toggle:focus,
  .autoplay-toggle:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }

  .toggle-bg {
    position: absolute;
    inset: 0;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    transition: all 0.3s ease;
  }

  .autoplay-toggle:hover {
    color: rgba(255, 255, 255, 0.95);
  }

  .autoplay-toggle:hover .toggle-bg {
    border-color: rgba(255, 255, 255, 0.25);
    background: rgba(255, 255, 255, 0.05);
  }

  .toggle-icon {
    position: absolute;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .play-icon {
    opacity: 0;
    transform: scale(0.5);
  }

  .autoplay-toggle.paused .pause-icon {
    opacity: 0;
    transform: scale(0.5);
  }

  .autoplay-toggle.paused .play-icon {
    opacity: 1;
    transform: scale(1);
  }

  /* ============================================
     BOTTOM CONTROLS - EDITORIAL
     ============================================ */
  .controls {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 20;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem 2rem;
    gap: 2rem;
    background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, transparent 100%);
  }

  /* Counter */
  .counter {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-family: "Exo", system-ui, sans-serif;
  }

  .counter-current {
    display: flex;
    font-size: 1.75rem;
    font-weight: 200;
    color: #fff;
    letter-spacing: -0.02em;
    line-height: 1;
  }

  .counter-digit {
    display: inline-block;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .counter-line {
    position: relative;
    width: 32px;
    height: 1px;
    overflow: hidden;
  }

  .line-track {
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.15);
  }

  .line-fill {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0%;
    background: rgba(255, 255, 255, 0.5);
    transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .counter-total {
    font-size: 0.875rem;
    font-weight: 200;
    color: rgba(255, 255, 255, 0.35);
    letter-spacing: 0.1em;
  }

  /* Simple Indicators */
  .indicators {
    display: flex;
    gap: 0.75rem;
    flex: 1;
    justify-content: center;
    max-width: 200px;
  }

  .indicator {
    position: relative;
    width: 40px;
    height: 3px;
    background: transparent;
    border: none;
    padding: 8px 0;
    cursor: pointer;
    transition: all 0.3s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
  }

  .indicator-bar {
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    height: 2px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 1px;
    overflow: hidden;
    transition: background 0.3s ease;
  }

  .indicator-progress {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0%;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1px;
    transition: width 0.1s linear;
  }

  .indicator:hover .indicator-bar {
    background: rgba(255, 255, 255, 0.3);
  }

  .indicator.active .indicator-bar {
    background: rgba(255, 255, 255, 0.25);
  }

  .indicator:focus,
  .indicator:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }

  /* ============================================
     RESPONSIVE
     ============================================ */
  @media (min-width: 640px) {
    .hero-slider {
      height: 78vh;
      min-height: 550px;
    }

    .slide-content {
      padding: 3rem 2.5rem 7.5rem;
    }

    .arrow-circle {
      width: 64px;
      height: 64px;
    }

    .nav-prev { left: 2rem; }
    .nav-next { right: 2rem; }

    .progress-container {
      top: 2rem;
      right: 2rem;
      width: 52px;
      height: 52px;
    }

    .controls {
      padding: 2rem 2.5rem;
    }

    .counter-current {
      font-size: 2rem;
    }

    .indicator {
      width: 48px;
    }
  }

  @media (min-width: 768px) {
    .hero-slider {
      height: 82vh;
      max-height: 950px;
    }

    .slide-content {
      padding: 3.5rem 3rem 8rem;
    }

    .nav-prev { left: 2.5rem; }
    .nav-next { right: 2.5rem; }

    .controls {
      padding: 2.25rem 3rem;
    }

    .indicators {
      gap: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .hero-slider {
      height: 85vh;
      max-height: 1000px;
    }

    .slide-content {
      padding: 4rem 4rem 9rem;
    }

    .arrow-circle {
      width: 72px;
      height: 72px;
    }

    .arrow-content svg {
      width: 24px;
      height: 24px;
    }

    .nav-prev { left: 3rem; }
    .nav-next { right: 3rem; }

    .progress-container {
      width: 56px;
      height: 56px;
    }

    .controls {
      padding: 2.5rem 4rem;
    }

    .counter-current {
      font-size: 2.25rem;
    }

    .indicators {
      max-width: 240px;
      gap: 1rem;
    }

    .indicator {
      width: 56px;
    }
  }

  /* ============================================
     REDUCED MOTION
     ============================================ */
  @media (prefers-reduced-motion: reduce) {
    .grain-overlay {
      animation: none;
    }

    .slide {
      transition: opacity 0.5s ease;
    }

    .slide-image {
      transform: none;
      animation: none;
      filter: none;
    }

    .title-wrapper {
      opacity: 1;
      transform: none;
      transition: none;
    }

    .nav-arrow {
      opacity: 0.9;
    }

    .arrow-bg,
    .arrow-content,
    .arrow-label {
      transition: none;
    }

    .counter-digit {
      transition: none;
    }

    .indicator-progress {
      transition: none !important;
    }
  }

  /* ============================================
     TOUCH DEVICES
     ============================================ */
  @media (hover: none) {
    .grain-overlay {
      opacity: 0.02;
    }

    .nav-arrow {
      opacity: 0.85;
    }

    .arrow-circle {
      width: 48px;
      height: 48px;
    }

    .arrow-bg {
      background: rgba(0, 0, 0, 0.4);
    }

    .arrow-label {
      display: none;
    }

    .nav-prev { left: 1rem; }
    .nav-next { right: 1rem; }

    .progress-container {
      width: 40px;
      height: 40px;
      top: 1.25rem;
      right: 1.25rem;
    }

    .controls {
      padding: 1.25rem 1.5rem;
    }

    .slide-content {
      padding-bottom: 5rem;
    }
  }
</style>
