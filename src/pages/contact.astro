---
import "@styles/general.css";
import Layout from "@layouts/Layout.astro";
import PageBanner from "@components/PageBanner.astro";
import MailIcon from "@icons/mail-icon.astro";
import MapIcon from "@icons/map-icon.astro";
import { Image } from "astro:assets";
import columbianImg from "@assets/profile/columbian.avif";
import minotaurpressImg from "@assets/minotaurpress.avif";

const contactData = [
  {
    icon: MailIcon,
    text: "info@fernandofeijoo.com",
    href: "mailto:info@fernandofeijoo.com",
    label: "Email",
  },
  {
    icon: MapIcon,
    text: "Cambridge, UK",
    href: "https://www.google.com/maps/place/Cambridge,+UK",
    label: "Location",
  },
];

const pageDescription =
  "Get in touch with Fernando Feijoo. Contact information, location in Cambridge, UK, for commissions, exhibitions, and collaborations.";
---

<Layout title="Contact - Fernando Feijoo" description={pageDescription}>
  <main class="contact-page">
    <PageBanner title="Contact" />

    <!-- Editorial Header -->
    <section class="editorial-header">
      <div class="header-grid">
        <div class="header-meta reveal-left">
          <span class="meta-label">Get in Touch</span>
          <span class="meta-index">01</span>
        </div>
        <div class="header-content reveal">
          <blockquote class="header-quote">
            <span class="quote-mark">"</span>
            The world is full of conflict and confusion. In my work I try to
            interpret the chaos in positive, humorous and imaginative ways.
            <span class="quote-mark">"</span>
          </blockquote>
          <cite class="quote-attribution">
            <span class="attribution-line"></span>
            <span class="attribution-name">Fernando Feijoo</span>
          </cite>
        </div>
      </div>
    </section>

    <!-- Asymmetric Content Grid -->
    <section class="content-section">
      <div class="content-asymmetric">
        <!-- Image with editorial treatment -->
        <div class="image-panel reveal-left">
          <figure class="editorial-image">
            <Image
              src={columbianImg}
              alt="Fernando Feijoo working with a Columbian printing press"
              loading="eager"
              decoding="async"
              width={700}
              height={875}
            />
            <figcaption class="image-caption">
              <span class="caption-number">Fig. 01</span>
              <span class="caption-text">Studio Work</span>
            </figcaption>
          </figure>
          <div class="image-accent" aria-hidden="true"></div>
        </div>

        <!-- Contact Information -->
        <div class="info-panel">
          <div class="panel-header reveal-right">
            <span class="panel-index">02</span>
            <h2 class="panel-title">Let's Create<br/>Together</h2>
          </div>

          <p class="panel-intro reveal-right" style="--delay: 0.1s">
            Interested in a commission, collaboration, or simply want to learn
            more about the work? I'd love to hear from you.
          </p>

          <div class="contact-methods reveal-right" style="--delay: 0.2s">
            {contactData.map((item, i) => (
              <a
                href={item.href}
                class="contact-method"
                target={item.href.startsWith("http") ? "_blank" : undefined}
                rel={item.href.startsWith("http") ? "noopener noreferrer" : undefined}
              >
                <span class="method-number">0{i + 1}</span>
                <div class="method-content">
                  <span class="method-label">{item.label}</span>
                  <span class="method-value">{item.text}</span>
                </div>
                <span class="method-arrow">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M7 17L17 7M17 7H7M17 7V17" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </a>
            ))}
          </div>

          <!-- Studio Link -->
          <div class="studio-connect reveal-right" style="--delay: 0.3s">
            <span class="connect-label">Follow the studio</span>
            <a 
              href="https://www.instagram.com/minotaurpress/"
              class="studio-link"
              target="_blank"
              rel="noopener noreferrer"
            >
              <figure class="studio-avatar">
                <Image
                  src={minotaurpressImg}
                  alt="Minotaur Press"
                  loading="lazy"
                  decoding="async"
                  width={48}
                  height={48}
                />
              </figure>
              <div class="studio-info">
                <span class="studio-handle">@minotaurpress</span>
                <span class="studio-desc">Behind the scenes</span>
              </div>
              <span class="studio-indicator">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M7 17L17 7M17 7H7M17 7V17" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>
          </div>

          <!-- CV Download -->
          <div class="cv-action reveal-right" style="--delay: 0.4s">
            <a href="#" class="cv-download">
              <span class="cv-text">Download CV</span>
              <span class="cv-line"></span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Newsletter Section - Dark -->
    <section class="newsletter-editorial">
      <div class="newsletter-container">
        <div class="newsletter-grid">
          <div class="newsletter-meta reveal-left">
            <span class="meta-index light">03</span>
            <span class="meta-label light">Newsletter</span>
          </div>
          <div class="newsletter-content reveal-right">
            <h2 class="newsletter-title">Stay Updated</h2>
            <p class="newsletter-desc">
              Receive updates on new works, exhibitions, and studio news.
              No spam, unsubscribe anytime.
            </p>

            <form
              action="https://fernandofeijoo.us21.list-manage.com/subscribe/post"
              method="POST"
              class="newsletter-form"
              target="_blank"
            >
              <input type="hidden" name="u" value="YOUR_MAILCHIMP_U_VALUE" />
              <input type="hidden" name="id" value="YOUR_MAILCHIMP_ID_VALUE" />

              <div class="form-group">
                <input
                  type="email"
                  name="EMAIL"
                  placeholder="your@email.com"
                  required
                  autocomplete="email"
                  class="newsletter-input"
                />
                <button type="submit" class="newsletter-submit">
                  <span>Subscribe</span>
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>

              <div style="position: absolute; left: -5000px;" aria-hidden="true">
                <input type="text" name="b_YOUR_MAILCHIMP_U_VALUE_YOUR_MAILCHIMP_ID_VALUE" tabindex="-1" value="" />
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Decorative Elements -->
      <div class="editorial-decoration" aria-hidden="true">
        <div class="deco-line"></div>
        <div class="deco-dot"></div>
      </div>
    </section>
  </main>
</Layout>

<style>
  /* ========================================
     EDITORIAL HEADER
     ======================================== */
  .editorial-header {
    padding: clamp(3rem, 8vw, 4rem) clamp(1rem, 3vw, 1.5rem) clamp(2rem, 6vw, 3rem);
    background: #fafafa;
    border-bottom: 1px solid #eee;
  }

  .header-grid {
    max-width: clamp(320px, 90vw, 1100px);
    margin: 0 auto;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: clamp(1.5rem, 4vw, 2rem);
    align-items: start;
  }

  .header-meta {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .meta-label {
    font-size: 0.625rem;
    font-weight: 600;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #888;
    writing-mode: vertical-rl;
    transform: rotate(180deg);
  }

  .meta-index {
    font-size: 2.5rem;
    font-weight: 300;
    color: #e0e0e0;
    line-height: 1;
  }

  .header-content {
    max-width: 640px;
  }

  .header-quote {
    font-size: clamp(1.375rem, 3.5vw, 2rem);
    font-weight: 400;
    line-height: 1.5;
    color: #1a1a1a;
    margin: 0;
    position: relative;
  }

  .quote-mark {
    color: #ccc;
    font-size: 1.2em;
    font-weight: 300;
  }

  .quote-attribution {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 1.5rem;
    font-style: normal;
  }

  .attribution-line {
    width: 40px;
    height: 1px;
    background: #ccc;
  }

  .attribution-name {
    font-size: 0.8125rem;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: #666;
  }

  /* ========================================
     ASYMMETRIC CONTENT
     ======================================== */
  .content-section {
    padding: clamp(3rem, 8vw, 4rem) clamp(1rem, 3vw, 1.5rem);
    position: relative;
  }

  .content-asymmetric {
    max-width: clamp(320px, 90vw, 1100px);
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: clamp(2rem, 5vw, 3rem);
  }

  /* Image Panel */
  .image-panel {
    position: relative;
  }

  .editorial-image {
    margin: 0;
    position: relative;
    overflow: hidden;
  }

  .editorial-image img {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .editorial-image:hover img {
    transform: scale(1.02);
  }

  .image-caption {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 1rem;
    font-size: 0.75rem;
    color: #888;
  }

  .caption-number {
    font-weight: 600;
    color: #ccc;
  }

  .caption-text {
    font-style: italic;
  }

  .caption-text::before {
    content: 'â€”';
    margin-right: 0.5rem;
    color: #ddd;
  }

  .image-accent {
    position: absolute;
    top: -1rem;
    right: -1rem;
    width: 60%;
    height: 40%;
    border: 1px solid #eee;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.6s ease;
  }

  .image-panel:hover .image-accent {
    opacity: 1;
  }

  /* Info Panel */
  .info-panel {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .panel-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
  }

  .panel-index {
    font-size: 1.5rem;
    font-weight: 300;
    color: #e0e0e0;
  }

  .panel-title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 500;
    letter-spacing: -0.03em;
    color: #000;
    margin: 0;
    line-height: 1.1;
    text-align: right;
  }

  .panel-intro {
    font-size: 1.0625rem;
    line-height: 1.7;
    color: #555;
    max-width: 400px;
    margin-left: auto;
    text-align: right;
  }

  /* Contact Methods */
  .contact-methods {
    display: flex;
    flex-direction: column;
    border-top: 1px solid #eee;
  }

  .contact-method {
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 1.5rem;
    padding: 1.5rem 0;
    border-bottom: 1px solid #eee;
    text-decoration: none;
    color: inherit;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
  }

  .contact-method::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #000;
    transform: scaleY(0);
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .contact-method:hover {
    padding-left: 1.5rem;
  }

  .contact-method:hover::before {
    transform: scaleY(1);
  }

  .method-number {
    font-size: 0.75rem;
    font-weight: 600;
    color: #ccc;
    transition: color 0.3s ease;
  }

  .contact-method:hover .method-number {
    color: #000;
  }

  .method-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .method-label {
    font-size: 0.6875rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: #999;
  }

  .method-value {
    font-size: 1.0625rem;
    font-weight: 500;
    color: #000;
  }

  .method-arrow {
    color: #ddd;
    opacity: 0;
    transform: translateX(-10px);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .contact-method:hover .method-arrow {
    opacity: 1;
    transform: translateX(0);
    color: #000;
  }

  /* Studio Connect */
  .studio-connect {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1.5rem;
    background: #fafafa;
    border-radius: 4px;
  }

  .connect-label {
    font-size: 0.625rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: #888;
  }

  .studio-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s ease;
  }

  .studio-link:hover {
    transform: translateX(4px);
  }

  .studio-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    overflow: hidden;
    margin: 0;
    border: 2px solid #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .studio-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .studio-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .studio-handle {
    font-size: 0.9375rem;
    font-weight: 600;
    color: #000;
  }

  .studio-desc {
    font-size: 0.8125rem;
    color: #777;
  }

  .studio-indicator {
    color: #ccc;
    transition: all 0.3s ease;
  }

  .studio-link:hover .studio-indicator {
    color: #000;
    transform: translateX(4px);
  }

  /* CV Action */
  .cv-action {
    text-align: right;
  }

  .cv-download {
    display: inline-flex;
    align-items: center;
    gap: 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #000;
    text-decoration: none;
    padding: 0.75rem 0;
    position: relative;
  }

  .cv-line {
    width: 60px;
    height: 1px;
    background: #000;
    transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .cv-download:hover .cv-line {
    width: 100px;
  }

  /* ========================================
     NEWSLETTER EDITORIAL
     ======================================== */
  .newsletter-editorial {
    padding: clamp(3rem, 10vw, 5rem) clamp(1rem, 3vw, 1.5rem);
    background: #0a0a0a;
    position: relative;
    overflow: hidden;
  }

  .newsletter-container {
    max-width: clamp(320px, 90vw, 1100px);
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }

  .newsletter-grid {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 2rem;
    align-items: start;
  }

  .meta-index.light {
    color: rgba(255,255,255,0.15);
  }

  .meta-label.light {
    color: rgba(255,255,255,0.4);
  }

  .newsletter-content {
    max-width: 500px;
  }

  .newsletter-title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 500;
    letter-spacing: -0.03em;
    color: #fff;
    margin: 0 0 1rem;
  }

  .newsletter-desc {
    font-size: 1.0625rem;
    line-height: 1.6;
    color: rgba(255,255,255,0.5);
    margin: 0 0 2rem;
  }

  .newsletter-form {
    position: relative;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    position: relative;
  }

  .newsletter-input {
    width: 100%;
    padding: 1rem 0;
    font-size: 1.125rem;
    font-family: inherit;
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(255,255,255,0.15);
    color: #fff;
    outline: none;
    transition: border-color 0.4s ease;
  }

  .newsletter-input::placeholder {
    color: rgba(255,255,255,0.25);
  }

  .newsletter-input:hover,
  .newsletter-input:focus {
    border-color: rgba(255,255,255,0.4);
  }

  .newsletter-submit {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 1rem 2rem;
    background: #fff;
    color: #000;
    font-size: 0.9375rem;
    font-weight: 600;
    font-family: inherit;
    border: none;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    align-self: flex-start;
  }

  .newsletter-submit:hover {
    background: #f5f5f5;
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }

  .newsletter-submit svg {
    transition: transform 0.3s ease;
  }

  .newsletter-submit:hover svg {
    transform: translateX(4px);
  }

  /* Decorative Elements */
  .editorial-decoration {
    position: absolute;
    bottom: 2rem;
    right: 2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .deco-line {
    width: 60px;
    height: 1px;
    background: rgba(255,255,255,0.1);
  }

  .deco-dot {
    width: 4px;
    height: 4px;
    background: rgba(255,255,255,0.2);
    border-radius: 50%;
  }

  /* ========================================
     ANIMATIONS
     ======================================== */
  .reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .reveal-left {
    opacity: 0;
    transform: translateX(-40px);
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .reveal-left.visible {
    opacity: 1;
    transform: translateX(0);
  }

  .reveal-right {
    opacity: 0;
    transform: translateX(40px);
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1) var(--delay, 0s),
                transform 0.8s cubic-bezier(0.16, 1, 0.3, 1) var(--delay, 0s);
  }

  .reveal-right.visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* ========================================
     RESPONSIVE
     ======================================== */
  @media (min-width: 768px) {
    .editorial-header {
      padding: 5rem 2rem 4rem;
    }

    .header-grid {
      gap: 3rem;
    }

    .content-section {
      padding: 5rem 2rem;
    }

    .content-asymmetric {
      grid-template-columns: 1.1fr 0.9fr;
      gap: 4rem;
      align-items: start;
    }

    .info-panel {
      padding-top: 2rem;
    }

    .newsletter-editorial {
      padding: 6rem 2rem;
    }

    .form-group {
      flex-direction: row;
      align-items: flex-end;
    }

    .newsletter-input {
      flex: 1;
    }
  }

  @media (min-width: 1024px) {
    .editorial-header {
      padding: 6rem 2rem 5rem;
    }

    .content-asymmetric {
      gap: 6rem;
    }

    .newsletter-editorial {
      padding: 7rem 2rem;
    }
  }

  /* ========================================
     REDUCED MOTION
     ======================================== */
  @media (prefers-reduced-motion: reduce) {
    .reveal, .reveal-left, .reveal-right {
      opacity: 1;
      transform: none;
      transition: none;
    }

    .editorial-image img,
    .contact-method,
    .studio-link,
    .cv-line,
    .newsletter-submit {
      transition: none;
    }

    .contact-method:hover,
    .studio-link:hover,
    .newsletter-submit:hover {
      transform: none;
    }
  }

  /* ========================================
     PRINT
     ======================================== */
  @media print {
    .newsletter-editorial {
      display: none;
    }

    .editorial-header {
      background: none;
      border-bottom: 1px solid #000;
    }

    .meta-index {
      color: #ccc;
    }

    .image-accent,
    .editorial-decoration {
      display: none;
    }
  }
</style>

<script is:inline>
  (function() {
    function initContactPage() {
      const revealElements = document.querySelectorAll('.reveal, .reveal-left, .reveal-right');
      
      const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            revealObserver.unobserve(entry.target);
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      });

      revealElements.forEach(el => revealObserver.observe(el));
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initContactPage);
    } else {
      initContactPage();
    }

    document.addEventListener('astro:after-swap', initContactPage);
    document.addEventListener('astro:page-load', initContactPage);
  })();
</script>
