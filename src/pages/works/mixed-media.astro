---
import WorksLayout from "@components/WorksLayout.astro";
import WorkCard from "@components/WorkCard.astro";
import { WORKS } from "@data/works";
import { processImageUrl } from "@utils/images";

const mixedMediaCategory = WORKS.find(
  (category) => category.slug === "mixed-media"
);
if (!mixedMediaCategory) throw new Error("Mixed Media category not found");

const collections = mixedMediaCategory.collections || [];

const getFirstImageFromCollection = (
  collection: (typeof collections)[0]
): string => {
  if (collection.works && collection.works.length > 0) {
    const work = collection.works[0];
    if (work.imageUrls && work.imageUrls.length > 0) {
      return processImageUrl(work.imageUrls[0]);
    }
  }
  return "";
};

const bannerImage =
  collections.length > 0
    ? getFirstImageFromCollection(collections[0])
    : undefined;

const description = `Just as the sketchbook is a means of observation and investigation and recording, other media are sometimes explored: painting, collage, mixed media and experiments with colour.

The breadth of media utilised in my work represents a continual search for new forms to represent emerging ideas and responses to an ever-changing world.

Fascinated by the past, by myth, by architecture, nature and landscape, and characters met on my own journey through life and this world, the works in this section have often fed into other individual pieces or series.`;
---

<WorksLayout
  title="Mixed Media"
  description={description}
  bannerImage={bannerImage}
  breadcrumbs={[
    { label: "Home", href: "/" },
    { label: "Works", href: "/works" },
    { label: "Mixed Media" },
  ]}
  introText={description}
  sectionTitle={collections.length > 0 ? "Collections" : undefined}
  showEmpty={collections.length === 0}
  emptyIcon="ðŸŽ¨"
  emptyTitle="No Mixed Media Collections Available"
>
  {
    collections.map((collection, index) => (
      <div class="grid-item" style={`--delay: ${0.2 + index * 0.08}s`}>
        <WorkCard
          href={`/works/mixed-media/${collection.slug}`}
          title={collection.title}
          subtitle=""
          imageUrl={getFirstImageFromCollection(collection)}
          imageAlt={`${collection.title} collection`}
          isAboveFold={index < 3}
        />
      </div>
    ))
  }
</WorksLayout>

<style>
  .grid-item {
    opacity: 0;
    animation: fadeInUp 0.6s var(--ease-out-expo, cubic-bezier(0.16, 1, 0.3, 1))
      forwards;
    animation-delay: var(--delay, 0s);
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .grid-item {
      opacity: 1;
      animation: none;
    }
  }
</style>
